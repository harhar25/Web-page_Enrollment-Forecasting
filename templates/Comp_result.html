<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comparison Result</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .chart-container {
      position: relative;
      height: 350px;
    }
  </style>
</head> 
<body>
  <div class="container mt-5">
    <div class="card shadow p-4">
      <h3 class="text-center">Comparison Result</h3>
      <p class="mt-3"><strong>Course 1:</strong> {{ course1 }}</p>
      <p><strong>Course 2:</strong> {{ course2 }}</p>
      <div class="text-center mb-4">
        <a href="{{ url_for('comparefilter') }}" class="btn btn-primary">Back</a>
      </div>
    </div>

    <!-- Graphs Row -->
    <div class="row mb-4">
      <!-- Graph for Course 1 -->
      <div class="col-md-6">
        <div class="card dashboard-card">
          <div class="card-body">
            <h5 class="card-title text-center">Actual vs Forecast - {{ course1 }}</h5>
            <div class="chart-container">
              <canvas id="course1Chart"></canvas>
            </div>
            <div class="text-center mt-3">
              <button class="btn btn-success btn-sm" onclick="downloadChart('course1Chart', '{{ course1 }}')">Download Chart</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Graph for Course 2 -->
      <div class="col-md-6">
        <div class="card dashboard-card">
          <div class="card-body">
            <h5 class="card-title text-center">Actual vs Forecast - {{ course2 }}</h5>
            <div class="chart-container">
              <canvas id="course2Chart"></canvas>
            </div>
            <div class="text-center mt-3">
              <button class="btn btn-success btn-sm" onclick="downloadChart('course2Chart', '{{ course2 }}')">Download Chart</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Chart.js Scripts -->
  <script>
    // Sample data (replace with your actual results from Flask)
    const actualData1 = [50, 60, 70, 80, 90];  
    const forecastData1 = [55, 65, 75, 85, 95];  

    const actualData2 = [40, 55, 65, 78, 88];  
    const forecastData2 = [45, 58, 68, 82, 92];  

    // Chart for Course 1
    new Chart(document.getElementById('course1Chart'), {
      type: 'line',
      data: {
        labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
        datasets: [
          { label: 'Actual', data: actualData1, borderColor: '#4e73df', fill: false },
          { label: 'Forecast', data: forecastData1, borderColor: '#1cc88a', fill: false }
        ]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });

    // Chart for Course 2
    new Chart(document.getElementById('course2Chart'), {
      type: 'line',
      data: {
        labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'],
        datasets: [
          { label: 'Actual', data: actualData2, borderColor: '#e74a3b', fill: false },
          { label: 'Forecast', data: forecastData2, borderColor: '#f6c23e', fill: false }
        ]
      },
      options: { responsive: true, maintainAspectRatio: false }
    });

    // Download chart as PNG
    function downloadChart(chartId, courseName) {
      const link = document.createElement('a');
      link.download = courseName + "_chart.png";
      link.href = document.getElementById(chartId).toDataURL("image/png");
      link.click();
    }
  </script>
</body>
</html>
